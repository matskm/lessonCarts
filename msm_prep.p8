pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--project caleb

cls()

px=50
py=50

lft_edge=8
rit_edge=112
top_edge=8
bot_edge=112

edge_flag = false

-- bullet table
bulletone = {
	x = 32, 
	y = 32, 
	active = false,
	dicn = "x_pos", 
	draw = function(self)
		circfill(self.x, self.y, 3, 8)
	end
}




function _draw()

 cls() 
 spr(001,px,py)
 map(0,0,0,0,16,16)
 draw_bullets()

end

function _update()

 process_rit_edge()
 process_lft_edge()
 process_top_edge()
 process_bot_edge()
 
 process_btns()
  
 update_bullets()
end

function fire_bulletone(dir)

  if(dir == "x_neg") then
    bulletone["active"] = true
    bulletone["x"] = px
    bulletone["y"] = py
    bulletone["dicn"] = dir
  end

end

function update_bullets()

  if(bulletone["active"]==true) then
    
    if(bulletone["dicn"]=="x_neg") then
      bulletone["x"] = bulletone["x"] - 3
    end
  
  end

end

function draw_bullets()

 if(bulletone["active"] == true) then
   bulletone:draw()
 end

end

function process_btns()

 if( btn(0) ) then
  px = px-1
  if(btnp(5) ) then
    fire_bulletone("x_neg")
  end
 end
 
 if( btn(1) ) then
  px = px+1
 end
 
 if( btn(2) ) then
  py = py-1
 end
 
 if( btn(3) ) then
  py = py+1
 end

end


function process_rit_edge()

 if(not btn(1) ) then
   edge_flag=false 
 end
 
 if(px == rit_edge) then
   px = px-1
   if(edge_flag == false) then
     sfx(5)
     edge_flag=true
   end
 end

end

function process_lft_edge()

 if(px == lft_edge) then
   px = px+1
   sfx(5)
 end

end

function process_top_edge()

 if(py == top_edge) then
   py = py+1
   sfx(5)
 end

end

function process_bot_edge()

 if(py == bot_edge) then
   py = py-1
   sfx(5)
 end

end















--probably the first idea 
--is to make a new table 
--for each  object and saving 
-- it on a variable. we can 
-- just define a bunch of 
-- bullets and then set them 
-- when we press shoot.


--in our _draw callback 
-- we execute the draw() 
-- function of bulletone: 
-- bulletone:draw(). 


__gfx__
00000000000ccc006777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000cc0c00d666666700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700066666c0d076607700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000660000ccd706670700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770006606c88cd66666670000ccdd000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000600800cd6622667000c9cccd0d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000668101d668266700cccc88ccd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000006111ddddddd60007ccc8d0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000007ccd8000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0200000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
001000001805018150182501835018450185501865018750180501815018250183501845018550186501875018050181501825018350184501855018650187501805018150182501835018450185501865018750
001000001805018150182501835018450185501867018750180501815018250183501845018550186701875018050181501825018350184501855018670187501805018150182501835018450185501867018750
001000000c7550c7550c7550c7550f7550f7550f7550f755117551175511755117550f7550f7550f7550f7550c7550c7550c7550c7550f7550f7550f7550f755117551175511755117550f7550f7550f7550f755
001000001605518075180751807518075160751607516075160751307513075130751307511075110751107511075130751307513075130751307513075130751307513075130751307513075160751607516075
001000001807518075240752407522075220751d0751f0751807518075240752407522075220751d0751f0751807518075240752407522075220751d0751f0751807518075240752407522075220751d0751f075
00050000171501c150231503215000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100001000010000100
__music__
00 41024344
00 01024344
00 01020344
00 01020344
03 01020304

